{% extends "base.html" %}

{% block title %}Change Password - NEET Study Tracker{% endblock %}

{% block content %}
<div style="max-width: 600px; margin: 0 auto;">
    {% if forced %}
    <div class="alert alert-warning">
        <h2>‚ö†Ô∏è Password Change Required</h2>
        <p>An administrator has reset your password. You must create a new password before continuing.</p>
    </div>
    {% else %}
    <h1>Change Password</h1>
    {% endif %}
    
    <div class="card" style="margin-top: 2rem;">
        <div class="card-body">
            <form method="POST" novalidate>
                {{ form.hidden_tag() }}
                
                <div class="form-group">
                    {{ form.new_password.label(class="form-label") }}
                    {{ form.new_password(class="form-control", placeholder="Enter new password", autofocus=true) }}
                    {% if form.new_password.errors %}
                        <span style="color: var(--color-error); font-size: 0.875rem;">
                            {{ form.new_password.errors[0] }}
                        </span>
                    {% endif %}
                    <p class="text-muted" style="margin-top: 0.5rem; font-size: 0.875rem;">
                        Password must be at least 6 characters long
                    </p>
                </div>
                
                <div class="form-group">
                    {{ form.confirm_password.label(class="form-label") }}
                    {{ form.confirm_password(class="form-control", placeholder="Confirm new password") }}
                    {% if form.confirm_password.errors %}
                        <span style="color: var(--color-error); font-size: 0.875rem;">
                            {{ form.confirm_password.errors[0] }}
                        </span>
                    {% endif %}
                </div>
                
                <div style="margin-top: 2rem;">
                    {{ form.submit(class="btn btn-primary btn-full-width") }}
                </div>
                
                {% if not forced %}
                <div style="text-align: center; margin-top: 1rem;">
                    <a href="{{ url_for('dashboard') }}">Cancel</a>
                </div>
                {% endif %}
            </form>
        </div>
    </div>
    
    {% if forced %}
    <div class="alert alert-info" style="margin-top: 2rem;">
        <p><strong>üí° Tips for creating a strong password:</strong></p>
        <ul>
            <li>Use at least 8 characters</li>
            <li>Mix uppercase and lowercase letters</li>
            <li>Include numbers and symbols</li>
            <li>Don't use common words or patterns</li>
            <li>Don't reuse passwords from other sites</li>
        </ul>
    </div>
    {% endif %}
</div>
{% endblock %}
